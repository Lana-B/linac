#!/bin/bash 
#PBS -l walltime=72:00:00 
#PBS -j oe
#PBS -l select=1:ncpus=1
#PBS -l select=1:ncpus=1:mem=500mb
#PBS -J 1-988
#PBS -o /work/lb8075/job_logfiles

module add apps/gate/8.2
Nparts=(14296546 14296546 14514698 14377623 14375897 14356883 14381142 14377372 14357711 14278580 14442150 14449068 14457121 14347223 14411093 14388768 14352151 14428541 14651998 14314539 14245347 14298844 14313860 14486094 14551487 14237048 14343197 14418885 14650428 14246392 14323984 14656217 14186068 14473968 14315665 14339584 14527794 14384271 14374746 14558748 14446474 14338515 14318586 14315309 14516420 14653526 14244681 14315587 14659906 14408342 14652984 14426990 14650615 14194202 14346802 14462366 14352050 14409440 14403427 14311978 14450162 14650147 14558302 14206684 14444385 14270786 14399828 14415137 14432777 14344821 14356589 14204070 14650663 14551260 14375315 14328451 14196497 14253894 14382844 14466414 14736643 14362721 14267808 14656258 14147855 14284998 14390493 14657272 14292963 14448678 14478315 14277744 14596293 14621515 14272306 14383294 14257173 14258566 14652315 14275772 14314821 14384519 14653879 14584438 14330477 14373886 14215367 14365574 14392262 14405140 14563433 14413013 14454600 14335130 14310443 14341888 14655821 14507353 14406670 14649928 14159431 14322328 14518884 14410427 14373756 14416493 14649408 14254173 14441633 14447628 14295296 14497744 14478790 14493674 14432478 14500419 14544326 14188698 14492020 14319205 14446901 14509286 14402714 14655218 14398385 14379845 14410575 14442013 14370620 14339169 14616608 14412395 14343024 14275865 14518916 14433795 14008157 14197841 14358912 14655109 14782562 14435056 14457141 14403924 14233835 14460663 14652374 14377741 14387305 14421541 14442249 14312979 14168917 14446771 14231147 14438810 14295889 14204848 14482502 14526687 14393707 14419532 14370664 14226531 14390566 14442978 14361238 14444687 14356911 14281803 14307228 14472252 14373536 14293038 14658582 14530061 14272642 14246038 14501005 14365733 14312079 14293024 14300711 14492942 14652970 14649757 14478012 14350555 14586057 14600182 14446473 14391571 14467199 14561215 14462980 14456013 14658092 14344081 14566709 14312813 14384753 14406662 14443026 14404040 14200802 14385940 14335145 14492378 14460473 14363312 14285804 14353067 14154394 14178462 14251661 14385328 14398391 14359004 14527967 14388265 14390260 14376192 14304835 14553674 14317303 14552176 14479114 14182138 14610260 14471582 14563725 14275411 14317289 14320454 14414493 14274911 14326692 14394406 14344777 14658257 14346564 14228437 14387380 14554439 14528211 14381662 14333377 14374510 14656110 14315242 14410905 14335390 14322513 14221837 14247520 14328559 14419605 14653922 14352034 14370145 14591968 14287937 14313020 14298358 14274004 14232906 14375620 14340454 14492949 14647231 14398045 14235798 14654854 14263988 14173526 14328873 14274161 14656818 14484956 14225695 14377167 14654676 14314021 14430449 14355615 14304985 14198225 14511495 14586149 14183426 14471941 14462386 14445945 14472277 14425222 14378908 14287179 14376995 14459380 14416375 14209951 14631308 14463024 14335980 14507913 14313659 14486140 14306381 14477013 14406963 14651268 14341060 14470660 14559503 14175635 14658078 14507438 14637473 14198252 14329004 14221919 14676020 14175034 14181037 14326817 14616730 14229830 14416201 14272911 14600085 14308103 14278081 14403204 14264798 14399547 14325765 14473173 14157734 14322362 14491685 14191148)
cat  /home/lb8075/linac/mac/Main_PhS3_10x10_Flexible.mac 
mycommand="Gate /home/lb8075/linac/mac/Main_PhS3_10x10_Flexible.mac -a '[peakzlength_um,50] [peakztrans_mm,450.025] [lightcoverzlength_um,20] [lightcoverztrans_mm,460.06] [pathOutputDose,/work/lb8075/PhaseSpaces/Flex/PhS3DoseFromElec_50umpeak_20umBlackOut_peakMat_Aluminium_BOmat_Polyethylene_peaks-under-BlackOut_10mm] [inputParticleType,/gate/physics/processList Enabled] [pathGateMaterials,/home/lb8075/linac/data/GateMaterials.db] [id,$PBS_ARRAY_INDEX] [inputPhaseSpaceFile,/work/lb8075/PhaseSpaces/PhS2Elec/ElecFromElec/output2e9primaries-lana2-PhS-e_nobias{id}.root] [seed,$RANDOM$RANDOM$RANDOM] [primaries,${Nparts[$PBS_ARRAY_INDEX-1]}] [lightcover_material,Polyethylene] [peak_material,Aluminium]'"

echo $mycommand 
eval $mycommand
echo "Time of interum job ending : $(date)" 
mycommand="Gate /home/lb8075/linac/mac/Main_PhS3_10x10_Flexible.mac -a '[peakzlength_um,50] [peakztrans_mm,450.025] [lightcoverzlength_um,20] [lightcoverztrans_mm,460.06] [pathOutputDose,/work/lb8075/PhaseSpaces/Flex/PhS3DoseFromElec_50umpeak_20umBlackOut_peakMat_Aluminium_BOmat_Aluminium_peaks-under-BlackOut_10mm] [inputParticleType,/gate/physics/processList Enabled] [pathGateMaterials,/home/lb8075/linac/data/GateMaterials.db] [id,$PBS_ARRAY_INDEX] [inputPhaseSpaceFile,/work/lb8075/PhaseSpaces/PhS2Elec/ElecFromElec/output2e9primaries-lana2-PhS-e_nobias{id}.root] [seed,$RANDOM$RANDOM$RANDOM] [primaries,${Nparts[$PBS_ARRAY_INDEX-1]}] [lightcover_material,Aluminium] [peak_material,Aluminium]'"

echo $mycommand 
eval $mycommand
echo "Time of interum job ending : $(date)" 
mycommand="Gate /home/lb8075/linac/mac/Main_PhS3_10x10_Flexible.mac -a '[peakzlength_um,50] [peakztrans_mm,450.025] [lightcoverzlength_um,300] [lightcoverztrans_mm,460.2] [pathOutputDose,/work/lb8075/PhaseSpaces/Flex/PhS3DoseFromElec_50umpeak_300umBlackOut_peakMat_Aluminium_BOmat_Polyethylene_peaks-under-BlackOut_10mm] [inputParticleType,/gate/physics/processList Enabled] [pathGateMaterials,/home/lb8075/linac/data/GateMaterials.db] [id,$PBS_ARRAY_INDEX] [inputPhaseSpaceFile,/work/lb8075/PhaseSpaces/PhS2Elec/ElecFromElec/output2e9primaries-lana2-PhS-e_nobias{id}.root] [seed,$RANDOM$RANDOM$RANDOM] [primaries,${Nparts[$PBS_ARRAY_INDEX-1]}] [lightcover_material,Polyethylene] [peak_material,Aluminium]'"

echo $mycommand 
eval $mycommand
echo "Time of interum job ending : $(date)" 
mycommand="Gate /home/lb8075/linac/mac/Main_PhS3_10x10_Flexible.mac -a '[peakzlength_um,50] [peakztrans_mm,450.025] [lightcoverzlength_um,300] [lightcoverztrans_mm,460.2] [pathOutputDose,/work/lb8075/PhaseSpaces/Flex/PhS3DoseFromElec_50umpeak_300umBlackOut_peakMat_Aluminium_BOmat_Aluminium_peaks-under-BlackOut_10mm] [inputParticleType,/gate/physics/processList Enabled] [pathGateMaterials,/home/lb8075/linac/data/GateMaterials.db] [id,$PBS_ARRAY_INDEX] [inputPhaseSpaceFile,/work/lb8075/PhaseSpaces/PhS2Elec/ElecFromElec/output2e9primaries-lana2-PhS-e_nobias{id}.root] [seed,$RANDOM$RANDOM$RANDOM] [primaries,${Nparts[$PBS_ARRAY_INDEX-1]}] [lightcover_material,Aluminium] [peak_material,Aluminium]'"

echo $mycommand 
eval $mycommand
echo "Time of interum job ending : $(date)" 
mycommand="Gate /home/lb8075/linac/mac/Main_PhS3_10x10_Flexible.mac -a '[peakzlength_um,100] [peakztrans_mm,450.05] [lightcoverzlength_um,20] [lightcoverztrans_mm,460.11] [pathOutputDose,/work/lb8075/PhaseSpaces/Flex/PhS3DoseFromElec_100umpeak_20umBlackOut_peakMat_Aluminium_BOmat_Polyethylene_peaks-under-BlackOut_10mm] [inputParticleType,/gate/physics/processList Enabled] [pathGateMaterials,/home/lb8075/linac/data/GateMaterials.db] [id,$PBS_ARRAY_INDEX] [inputPhaseSpaceFile,/work/lb8075/PhaseSpaces/PhS2Elec/ElecFromElec/output2e9primaries-lana2-PhS-e_nobias{id}.root] [seed,$RANDOM$RANDOM$RANDOM] [primaries,${Nparts[$PBS_ARRAY_INDEX-1]}] [lightcover_material,Polyethylene] [peak_material,Aluminium]'"

echo $mycommand 
eval $mycommand
echo "Time of interum job ending : $(date)" 
mycommand="Gate /home/lb8075/linac/mac/Main_PhS3_10x10_Flexible.mac -a '[peakzlength_um,100] [peakztrans_mm,450.05] [lightcoverzlength_um,20] [lightcoverztrans_mm,460.11] [pathOutputDose,/work/lb8075/PhaseSpaces/Flex/PhS3DoseFromElec_100umpeak_20umBlackOut_peakMat_Aluminium_BOmat_Aluminium_peaks-under-BlackOut_10mm] [inputParticleType,/gate/physics/processList Enabled] [pathGateMaterials,/home/lb8075/linac/data/GateMaterials.db] [id,$PBS_ARRAY_INDEX] [inputPhaseSpaceFile,/work/lb8075/PhaseSpaces/PhS2Elec/ElecFromElec/output2e9primaries-lana2-PhS-e_nobias{id}.root] [seed,$RANDOM$RANDOM$RANDOM] [primaries,${Nparts[$PBS_ARRAY_INDEX-1]}] [lightcover_material,Aluminium] [peak_material,Aluminium]'"

echo $mycommand 
eval $mycommand
echo "Time of interum job ending : $(date)" 
mycommand="Gate /home/lb8075/linac/mac/Main_PhS3_10x10_Flexible.mac -a '[peakzlength_um,100] [peakztrans_mm,450.05] [lightcoverzlength_um,300] [lightcoverztrans_mm,460.25] [pathOutputDose,/work/lb8075/PhaseSpaces/Flex/PhS3DoseFromElec_100umpeak_300umBlackOut_peakMat_Aluminium_BOmat_Polyethylene_peaks-under-BlackOut_10mm] [inputParticleType,/gate/physics/processList Enabled] [pathGateMaterials,/home/lb8075/linac/data/GateMaterials.db] [id,$PBS_ARRAY_INDEX] [inputPhaseSpaceFile,/work/lb8075/PhaseSpaces/PhS2Elec/ElecFromElec/output2e9primaries-lana2-PhS-e_nobias{id}.root] [seed,$RANDOM$RANDOM$RANDOM] [primaries,${Nparts[$PBS_ARRAY_INDEX-1]}] [lightcover_material,Polyethylene] [peak_material,Aluminium]'"

echo $mycommand 
eval $mycommand
echo "Time of interum job ending : $(date)" 
mycommand="Gate /home/lb8075/linac/mac/Main_PhS3_10x10_Flexible.mac -a '[peakzlength_um,100] [peakztrans_mm,450.05] [lightcoverzlength_um,300] [lightcoverztrans_mm,460.25] [pathOutputDose,/work/lb8075/PhaseSpaces/Flex/PhS3DoseFromElec_100umpeak_300umBlackOut_peakMat_Aluminium_BOmat_Aluminium_peaks-under-BlackOut_10mm] [inputParticleType,/gate/physics/processList Enabled] [pathGateMaterials,/home/lb8075/linac/data/GateMaterials.db] [id,$PBS_ARRAY_INDEX] [inputPhaseSpaceFile,/work/lb8075/PhaseSpaces/PhS2Elec/ElecFromElec/output2e9primaries-lana2-PhS-e_nobias{id}.root] [seed,$RANDOM$RANDOM$RANDOM] [primaries,${Nparts[$PBS_ARRAY_INDEX-1]}] [lightcover_material,Aluminium] [peak_material,Aluminium]'"

echo $mycommand 
eval $mycommand
echo "Time of interum job ending : $(date)" 
now=$(date) 
echo "Time of completion : $now" 
